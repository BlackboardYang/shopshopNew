/* empty css               *//* empty css             *//* empty css              */import{_ as T,A as y,e as h,o as d,c as w,f as n,a as s,w as t,T as b,H as D,u as p,D as G,F as L,b as B,G as A,k as V,I as E,B as H,C as J,l as K,z as v,J as M,q as j,s as O,g as Q,E as W,K as X,p as Y,m as Z}from"./index-1b255c59.js";import{p as P}from"./user-06137b4a.js";const k=m=>(Y("data-v-1c45756b"),m=m(),Z(),m),ee={class:"custom-container"},se={style:{width:"80%"}},te={key:0,class:"main-contents"},ae=k(()=>n("div",{style:{"text-align":"center"}},[n("h1",{style:{"font-weight":"bolder"}},"Forgot Password")],-1)),oe={style:{"font-size":"x-small"}},le=k(()=>n("span",{style:{"font-size":"x-small"}},"Get verify code",-1)),re={key:0,class:"main-contents"},ne=k(()=>n("div",{style:{"text-align":"center"}},[n("h1",{style:{"font-weight":"bolder"}},"Forgot Password")],-1)),ie={key:0},de={__name:"ForgetPage",setup(m){const i=y(0),C=y(!1),c=y(),a=h({email:"",code:"",password:"",confirm_password:""}),I={email:[{required:!0,message:"Please enter an email address"},{type:"email",message:"Please enter a correct email address",trigger:"blur"}],code:[{required:!0,message:"Please enter the verify code"}],password:[{required:!0},{min:6,max:16,message:"Length should be 6 to 16",trigger:["blur","change"]}],confirm_password:[{required:!0,message:"Please enter password again to confirm the password"},{validator:(o,e,r)=>{e===""?r(new Error("Please enter password again")):e!==a.password?r(new Error("Please ensure it is same as password")):r()},trigger:"blur"}]},R=(o,e)=>{o==="email"&&(C.value=e)},g=h({value:60}),x=h({value:!1}),q=()=>{P("/api/auth/valid-reset-email",{email:a.email},o=>{v.success(o),F()})},F=()=>{x.value=!0;const o=setInterval(()=>{g.value>0?g.value--:(x.value=!1,clearInterval(o))},1e3)},N=()=>{c.value.validate(o=>{o?P("/api/auth/start-reset",{email:a.email,code:a.code},()=>{i.value++}):v.warning("Enter email address and code please")})},U=()=>{c.value.validate(o=>{o?P("/api/auth/do-reset",{password:a.password},e=>{i.value++,v.success(e)}):v.warning("Please enter a new password")})};return(o,e)=>{const r=M,$=D,f=j,_=O,u=Q,S=W,z=X;return d(),w("div",ee,[n("div",se,[s($,{active:i.value,"finish-status":"success","align-center":""},{default:t(()=>[s(r,{title:"Email Check"}),s(r,{title:"Password Reset"}),s(r,{title:"Reset Complete"})]),_:1},8,["active"])]),s(b,{name:"el-fade-in-linear",mode:"out-in"},{default:t(()=>[i.value===0?(d(),w("div",te,[ae,s(S,{"label-position":"top","label-width":"100px",style:{"max-width":"500px"},model:a,rules:I,onValidate:R,ref_key:"formRef",ref:c},{default:t(()=>[s(_,{label:"Email",prop:"email"},{default:t(()=>[s(f,{modelValue:a.email,"onUpdate:modelValue":e[0]||(e[0]=l=>a.email=l),placeholder:"Enter your email","prefix-icon":p(G)},null,8,["modelValue","prefix-icon"])]),_:1}),s(_,{label:"Verify Code",prop:"code"},{default:t(()=>[s(f,{modelValue:a.code,"onUpdate:modelValue":e[2]||(e[2]=l=>a.code=l),placeholder:"Code","prefix-icon":p(L),maxlength:6},{append:t(()=>[x.value?(d(),B(u,{key:0},{default:t(()=>[n("span",oe,"Resend at "+A(g.value)+" seconds",1)]),_:1})):(d(),B(u,{key:1,onClick:e[1]||(e[1]=l=>(q(),F())),disabled:!C.value},{default:t(()=>[le]),_:1},8,["disabled"]))]),_:1},8,["modelValue","prefix-icon"])]),_:1}),s(u,{onClick:e[3]||(e[3]=l=>N())},{default:t(()=>[V("next")]),_:1})]),_:1},8,["model"])])):E("",!0)]),_:1}),s(b,{name:"el-fade-in-linear",mode:"out-in"},{default:t(()=>[i.value===1?(d(),w("div",re,[ne,s(S,{"label-position":"top","label-width":"100px",style:{"max-width":"500px"},model:a,rules:I,onValidate:R,ref_key:"formRef",ref:c},{default:t(()=>[s(_,{label:"Password",prop:"password"},{default:t(()=>[s(f,{modelValue:a.password,"onUpdate:modelValue":e[4]||(e[4]=l=>a.password=l),placeholder:"Enter your password",type:"password","prefix-icon":p(H)},null,8,["modelValue","prefix-icon"])]),_:1}),s(_,{label:"Confirm Password",prop:"confirm_password"},{default:t(()=>[s(f,{modelValue:a.confirm_password,"onUpdate:modelValue":e[5]||(e[5]=l=>a.confirm_password=l),placeholder:"Confirm your password",type:"password","prefix-icon":p(J)},null,8,["modelValue","prefix-icon"])]),_:1}),s(u,{onClick:e[6]||(e[6]=l=>U())},{default:t(()=>[V("next")]),_:1})]),_:1},8,["model"])])):E("",!0)]),_:1}),s(b,{name:"el-fade-in-linear",mode:"out-in"},{default:t(()=>[i.value===2?(d(),w("div",ie,[s(z,{icon:"success",title:"Reset Complete!","sub-title":"Login now"},{extra:t(()=>[s(u,{onClick:e[7]||(e[7]=l=>p(K).push("../welcome/login")),color:"#6495ed"},{default:t(()=>[V("Sign In")]),_:1})]),_:1})])):E("",!0)]),_:1})])}}},we=T(de,[["__scopeId","data-v-1c45756b"]]);export{we as default};
